## 作用：

​	调用open或者是openat函数用以打开或创建一个文件。

```c
#include <fcnt1.h>
int open(const char *path,int oflag,.../*mode_t mode*/);
int openat(int fd,const char *path,int oflag,.../*mode_t mode*/);
/*若成功返回文件描述符，若出错返回-1*/
```



## 参数说明

path：表示要打开或者创建的文件的名字。

oflag：用来说明此函数的多个选项，下列一个或多个常量进行“或运算”构成oflag参数，定义在<fcnt1.h>中。

详情请看书本P50。

fd参数：这个参数将两个函数区别开来

（1）path若是指定的是绝对路径，两函数执行操作无差别，fd这里作用可以被忽略。

（2）path若是指定相对路径，fd参数会指出相对路径在文件系统中开始的地址，fd参数是通过打开相对路径名所在的目录获取的

（3）path指定相对路径，但fd参数是特殊值AT_FDCWD。这种情况下路径名在当前工作目录获取，openat在操作上和open类似。



## 返回值说明

​	由open和openat函数返回的文件描述符一定是最小的未用描述符数值。这一点被某些应程序用来在标志输入，输出，错误上打开新的文件，例如：一个应用可以先关闭标志输出，然后打开另一个文件，打开操作前知道会在文件描述符1上打开。





## openat较于open想解决什么问题

（1）让线程可以使用相对路径名打开目录中的文件（也就是可以打开fd所指向的目录），而再只能打开当前工作目录

（2）避免TOCTTOU错误

