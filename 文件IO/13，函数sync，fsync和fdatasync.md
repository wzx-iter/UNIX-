## 背景知识

​	传统的UNIX系统实现在内核中设有缓冲区高速缓存或页高速缓存，大多数IO通过缓存区进行，当我们向文件写入数据时，内核通常先将数据复制到缓冲区中，然后进行排入队列，晚些时候再进行写入磁盘，这种方式被称为延迟写。

‘

## 功能：

​	为了使文件系统和缓冲区的内容保持一致，会把缓冲区的内容全部排入到写队列中进行写入数据。



## 函数体：

​	

```c
#include <unistd.h>
int fsync(int fd);
int fdatasync(int fd);
		//成功返回0，失败返回-1；
void sync(void);

```

（1）sync函数可以将缓冲区的数据排入写队列中，不用等待写磁盘结束就可以返回；

（2）fsync函数可以对指定文件起作用，等待写磁盘结束才可以返回，可用于数据库，这种程序需要确保修改过的快才写入磁盘中。

（3）fdatasync 类似于fsync，但它只影响文件的数据部分。

